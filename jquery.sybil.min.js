(function(e,t){"use strict";function r(t,r){this.instance=t;this.$instance=e(t);this.config=e.extend({},n,r,this.$instance.data());this.image=[];this.loaded=false;this.images=this.config.images;this.count=this.config.images.length;this.currentSlide=0;this.current=this.$instance.find(this.config.currentSlide);this.next=this.$instance.find(this.config.nextSlide);if(this.count){this.setup()}return this}var n={speed:7500,animationSpeed:3e3,scrollPos:1.1,currentSlide:".current",nextSlide:".next",animationIn:"bounceInUp",animationOut:"bounceOutUp",imageSize:"cover",scrollType:"vertical",navigation:false,fullscreen:true,onScroll:true,autoPlay:true,preLoad:true,loop:true,onchange:"",images:[]};r.prototype.setup=function(){this.setDefaults();if(this.config.fullscreen){var t=e(window).height();this.current.css("height",t);this.next.css("height",t)}if(this.config.onScroll){this.watcher()}if(this.config.autoPlay){this.play()}};r.prototype.setDefaults=function(){if(this.config.preLoad){for(var e in this.images){this.loadImage(this.images[e],true)}}else{this.loadImage(this.images[0],true);this.loadImage(this.images[1],true)}this.current.addClass(this.config.animationIn);this.current.css("background-size",this.config.imageSize);this.next.addClass("hidden");this.next.css("background-image",this.config.imageSize);var t=this.config.animationSpeed/1e3+"s";this.current.css("animation-duration",t);this.next.css("animation-duration",t)};r.prototype.loadImage=function(t,n){var r=this;var i=function(e){function s(){o();r.loaded=true;r.image.push(i);e.resolve(i);r.watcher();if(n){r.current.css("background-image","url("+r.image[0].src+")");if(typeof r.image[1]!="undefined"){r.next.css("background-image","url("+r.image[1].src+")")}}}function o(){i.onload=null}var i=new Image;i.onload=s;i.src=t};return e.Deferred(i).promise()};r.prototype.watcher=function(){var t=this;var n=t.currentSlide;e(window).scroll(function(){var r=e(window).scrollTop();if(typeof n==="undefined"){n=0}if(t.loaded){if(e(window).scrollTop()>t.image[n].height){var r=e(window).scrollTop()-t.image[n].height}if(t.config.scrollType=="vertical"){var i="center "+r*t.config.scrollPos+"px"}else if(t.config.scrollType=="horizontal"){var i="-"+r*t.config.scrollPos+"px center"}t.current.css("background-position",i);t.next.css("background-position",i)}});e(window).scroll()};r.prototype.play=function(){var e=this;this.timeoutID=setTimeout(function(){e.goTo("next")},this.config.speed)};r.prototype.goTo=function(e){if(e=="next"){e=this.currentSlide+1}if(e>=this.count){e=this.config.loop?0:this.count-1}if(e!=this.currentSlide){this.nextSlide=e;this.slide()}if(!this.config.loop&&e==this.count){this.stop()}this.play();if(this.config.onchange){this.config.onchange.call(this,this.slide)}};r.prototype.slide=function(){if(this.config.speed<this.config.animationSpeed){this.config.speed=this.config.animationSpeed}this.nextAnimation();this.currentAnimation();this.reset()};r.prototype.nextAnimation=function(){this.next.addClass(this.config.animationIn);this.next.css("background-size",this.config.imageSize);this.next.css("background-image","url("+this.image[this.nextSlide].src+")");this.current.addClass(this.config.animationOut)};r.prototype.currentAnimation=function(){var e=this;setTimeout(function(){e.current.css("background-image","url("+e.image[e.nextSlide].src+")");e.current.removeClass(e.config.animationOut);e.next.removeClass(e.config.animationIn)},this.config.animationSpeed)};r.prototype.stop=function(){this.paused=true;clearTimeout(this.timeoutID)};r.prototype.reset=function(){this.currentSlide=this.nextSlide;if(this.currentSlide==1){this.current.removeClass(this.config.animationIn);this.next.removeClass("hidden")}};e.fn.extend({sybil:function(t){return this.each(function(){if(!e.data(this,"sybil")){e.data(this,"sybil",new r(this,t))}})}})})(jQuery)